import{_ as e,a as t,b as s,n as o}from"./property-8b64881f.js";import{r,p as i}from"./lit-element-9a022b11.js";import{t as n}from"./state-47f777cb.js";import{T as a}from"./TimeLimitedGame2-428eeada.js";import{a as l,r as d,b as h}from"./Randomizer-a9177b86.js";import"./AscendingBalloons-e6d28717.js";import{G as m}from"./GameLogger-170cb2bc.js";import"./ProgressBar-3d7ba932.js";import"./ChildNotFoundError-35e8e684.js";import"./GametimeParameters-56ecf730.js";import"./GameSkeleton-34c44bc0.js";import"./MessageDialog-db2c0757.js";let c=e([o("addition-substraction-whole-decade-app")],(function(e,o){class a extends o{constructor(){super(),e(this),this.welcomeDialogImageUrl=new URL(new URL("../assets/Mompitz Elli star-yellow-650d5e78.png",import.meta.url).href,import.meta.url),this.parseUrl()}}return{F:a,d:[{kind:"field",decorators:[n()],key:"firstNumber",value:()=>1},{kind:"field",decorators:[n()],key:"secondNumber",value:()=>10},{kind:"field",decorators:[n()],key:"operator",value:()=>"+"},{kind:"field",decorators:[n()],key:"answers",value:()=>({correct:21,incorrect:[22,23,41]})},{kind:"field",decorators:[n()],key:"gameElementsDisabled",value:()=>!0},{kind:"field",key:"operators",value:()=>[]},{kind:"field",key:"decadeFirst",value:()=>!1},{kind:"field",key:"gameLogger",value:()=>new m("B","")},{kind:"method",key:"parseUrl",value:function(){const e=new URLSearchParams(window.location.search);e.getAll("operator").forEach((e=>{"plus"!==e||this.operators.find((e=>"+"===e))?"minus"!==e||this.operators.find((e=>"-"===e))||this.operators.push("-"):this.operators.push("+")})),0===this.operators.length&&this.operators.push("+"),e.has("decadeFirst")?this.decadeFirst=!0:this.decadeFirst=!1,this.decadeFirst?this.decadeFirst&&(2===this.operators.length?this.gameLogger.setSubCode("f"):"+"===this.operators[0]?this.gameLogger.setSubCode("d"):"-"===this.operators[1]&&this.gameLogger.setSubCode("e")):2===this.operators.length?this.gameLogger.setSubCode("c"):"+"===this.operators[0]?this.gameLogger.setSubCode("a"):"-"===this.operators[1]&&this.gameLogger.setSubCode("b")}},{kind:"get",key:"ascendingBalloons",value:function(){return this.getElement("#ascendingBalloons")}},{kind:"get",static:!0,key:"styles",value:function(){return[...t(s(a),"styles",this),r`
        .exercise {
          font-size: calc(1em + 4vmin);
        }
      `]}},{kind:"method",key:"getUpdateComplete",value:async function(){const e=await t(s(a.prototype),"getUpdateComplete",this).call(this);return await this.ascendingBalloons.updateComplete,e}},{kind:"method",key:"startNewGame",value:function(){t(s(a.prototype),"startNewGame",this).call(this),this.newRound()}},{kind:"get",key:"welcomeMessage",value:function(){const e=[];let t="";if(this.decadeFirst?this.decadeFirst&&(this.operators.find((e=>"+"===e))&&e.push("50+8"),this.operators.find((e=>"-"===e))&&e.push("70-5")):(this.operators.find((e=>"+"===e))&&e.push("33+20"),this.operators.find((e=>"-"===e))&&e.push("56-30")),e.length<=0||e.length>2)throw new Error("Internal error");return 1===e.length?t=`${e[0]}.`:2===e.length&&(t=`${e[0]} en ${e[1]}.`),i`<p>Sommen als ${t}</p>
      <p>Klik op de ballon met het juiste antwoord.</p> `}},{kind:"get",key:"welcomeDialogTitle",value:function(){return"Sommen met hele tientallen"}},{kind:"method",key:"handleCorrectAnswer",value:function(){this.numberOk+=1,this.newRound()}},{kind:"method",key:"handleWrongAnswer",value:function(){this.numberNok+=1}},{kind:"method",key:"handleAscensionComplete",value:function(){this.numberNok+=1,this.newRound()}},{kind:"method",key:"newRound",value:function(){let e;if(this.operator=l(this.operators),this.decadeFirst)if(this.firstNumber=10*d(1,9),this.secondNumber=d(1,9),"+"===this.operator)e=this.firstNumber+this.secondNumber;else{if("-"!==this.operator)throw new Error("Unsupported operator found");e=this.firstNumber-this.secondNumber}else if("+"===this.operator)this.firstNumber=d(1,89),this.secondNumber=10*d(1,9-Math.floor(this.firstNumber/10)),e=this.firstNumber+this.secondNumber;else{if("-"!==this.operator)throw new Error("Unsupported operator found");this.firstNumber=d(11,99),this.secondNumber=10*d(1,Math.floor(this.firstNumber/10)),e=this.firstNumber-this.secondNumber}let t=d(1,99);for(;t===e;)t=d(1,99);let s=d(0,9);for(;s===e%10;)s=d(0,9);const o=10*Math.floor(e/10)+s;let r=d(1,9);for(;r===Math.floor(e/10);)r=d(1,9);const i=[t,o,10*r+e%10];this.answers={correct:e,incorrect:[h(i),h(i),h(i)]},this.ascendingBalloons.restartAscension(),this.gameElementsDisabled=!1}},{kind:"method",key:"executeGameOverActions",value:function(){this.gameElementsDisabled=!0,this.gameLogger.logGameOver()}},{kind:"method",key:"renderGameContent",value:function(){return i`
      <ascending-balloons
        id="ascendingBalloons"
        style="position: absolute; top: 0; left: 0; height: 100%; width:100%;"
        @correct-balloon-clicked="${()=>this.handleCorrectAnswer()}"
        @wrong-balloon-clicked="${()=>this.handleWrongAnswer()}"
        @ascension-complete="${()=>this.handleAscensionComplete()}"
        .answers=${this.answers}
        ?disabled=${this.gameElementsDisabled}
        imageType="star"
      ></ascending-balloons>
      <div
        class="exercise"
        style="display: ${this.gameElementsDisabled?"none":"block"}; position: absolute; top: 20%; width: 100%; text-align: center;"
      >
        ${this.firstNumber} ${this.operator} ${this.secondNumber} = ?
      </div>
    `}}]}}),a);export{c as AdditionSubstractionWholeDecadeApp};
